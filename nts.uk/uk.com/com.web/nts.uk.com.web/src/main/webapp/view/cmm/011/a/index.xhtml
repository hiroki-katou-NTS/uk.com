<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:com="http://xmlns.jcp.org/jsf/component"
	xmlns:h="http://xmlns.jcp.org/jsf/html">
<body>
	<ui:composition template="../../../../master/base.xhtml">
		<ui:define name="htmlHead">
		
			<com:ValidatorScript>
				nts.uk.ctx.bs.employee.dom.workplace.info.WorkplaceCode
				nts.uk.ctx.bs.employee.dom.workplace.info.OutsideWorkplaceCode
				nts.uk.ctx.bs.employee.dom.workplace.info.WorkplaceName
				nts.uk.ctx.bs.employee.dom.workplace.info.WorkplaceDisplayName
				nts.uk.ctx.bs.employee.dom.workplace.info.WorkplaceGenericName
			</com:ValidatorScript>
			
			<com:scriptfile set="IGNITE" />
			
			<com:stylefile path="style.css" />
			<com:scriptfile path="../_base/cmm011.base.js" />
			<com:scriptfile path="cmm011.a.service.js" />
			<com:scriptfile path="cmm011.a.vm.js" />
			<com:scriptfile path="cmm011.a.start.js" />
		</ui:define>

		<!-- PAGE CONTENT -->
		<ui:define name="content">
			<div id="functions-area">
			
				<!-- BEGIN A1_1 ~ A1_3 -->
				<button tabindex="1" data-bind="click: createWkpDialog,
						enable: isNewMode ? true : isEnableButton">
						#{i18n.getText('CMM011_6')}</button>
				<button class="proceed" tabindex="2" data-bind="click: saveWorkplace,
					enable: isValidWorplace &amp;&amp; $root.errors.isEmpty">#{i18n.getText('CMM011_5',['Com_Workplace'])}</button>
				<button class="proceed" tabindex="3" data-bind="click: removeWorkplace,
					enable: isValidWorplace" style="margin-left: 200px;">#{i18n.getText('CMM011_7')}</button>
				<!-- END A1_1 ~ A1_3 -->
			</div>
			<div id="contents-area">
				<div id="left-content">

					<!-- BEGIN A2_1 ~ A2_6 -->
					<div id="left-content-top"
						class="bg-green caret-bottom caret-inline caret-background">
						<div class="cf">
							<div data-bind="ntsFormLabel: {}">#{i18n.getText('CMM011_2',['Com_Workplace'])}</div>
							<span data-bind="text: strDWorkplace">startDate</span>
							<label data-bind="enable: isValidWorplace" style="margin-left: 10px;margin-right: 10px;">#{i18n.getText('CMM011_26')}</label>
							<span data-bind="text: endDWorkplace, enable: isValidWorplace">endDate</span>
							<button class="pull-right" tabindex="9" data-bind="click: openWkpConfigDialog, enable: isValidWorplace">#{i18n.getText('CMM011_21')}</button>
						</div>
					</div>
					<!-- END A2_1 ~ A2_6 -->

					<!-- BEGIN A3_1 ~ A4_4 -->
					<div id="left-content-bottom" class="caret-right caret-background bg-green" data-bind="with: treeWorkplace">
						<i class="icon icon-searchbox"></i>
						<div tabindex="12" data-bind=" ntsSearchBox: {
							targetKey: 'workplaceId',
							mode: 'igTree',
							comId: 'single-tree-grid',
							items: lstWorkplace, 
							selected: selectedWpkId,
							selectedKey: 'workplaceId',
							childField: 'childs',
							fields: ['name', 'code']}" style="width: 280px;"></div>
							
						<table id="single-tree-grid" class="cf" tabindex="13" data-bind="ntsTreeGridView:{
								width: 430,
								height: calHeightTree(),
								dataSource: lstWorkplace,
								value: selectedWpkId,
								primaryKey: 'workplaceId',
								childDataKey: 'childs',
								primaryText: 'nodeText',
								multiple: false,
								enable: true,
								extColumns: treeColumns,
								showCheckBox: false}">
						</table>
					</div><!-- END A3_1 ~ A4_4 -->
				</div>

				<!-- BEGIN A5_1 ~ A_10_2 -->
				<div id="right-content">
					<table id="table-detail-setting">
						<col width="250"></col>
						<col width="260"></col>
						<col width="250"></col>
						<col width="340"></col>
						
						<!-- BEGIN A5_1 ~ A_5_5 -->
						<tr data-bind="with: workplaceHistory">
							<td class="td-detail" style="vertical-align: top;"><div
									data-bind="ntsFormLabel: {constraint: 'WorkplaceCode'}">#{i18n.getText('Com_Workplace')}</div></td>
							<td><div id="list-box" tabindex="14" data-bind="ntsListBox: {
								options: lstWpkHistory,
								optionsValue: 'historyId',
								optionsText: 'textDisplay',
								multiple: false,
								value: selectedHistoryId,
								enable: true,
								rows: 4,
								columns: [
									{ key: 'textDisplay', length: 15 }
								]}"></div></td>
							<td>
								<div><button tabindex="15" data-bind="click: addWkpHistoryDialog,
									enable: $parent.isValidWorplaceHistory">#{i18n.getText('CMM011_10', ['Com_Workplace'])}</button></div>
								<div><button tabindex="16" data-bind="click: updateWkpHistoryDialog,
									enable: $parent.isValidWorplaceHistory">#{i18n.getText('CMM011_11', ['Com_Workplace'])}</button></div>
								<div><button tabindex="17" data-bind="click: deleteWkpHistory,
									enable: $parent.isValidWorplaceHistory">#{i18n.getText('CMM011_12', ['Com_Workplace'])}</button></div>
							</td>
							<td></td>
						</tr><!-- END A5_1 ~ A_5_5 -->
						
						<!-- BEGIN A6_1 ~ A7_2 -->
						<tr>
							<td class="td-detail"><div data-bind="ntsFormLabel: {required: true, constraint: 'WorkplaceCode'}">
								#{i18n.getText('CMM011_13', ['Com_Workplace'])}</div></td>
							<td><div><input id="wkpCd" tabindex="18" data-bind="ntsTextEditor: {
											value: workplaceCode,
											name: '#[CMM011_13]',
											constraint: 'WorkplaceCode',
											option: {
												width: '100px',
											},
											required: true,
											enable: isNewMode}" /></div></td>
							<td><div data-bind="ntsFormLabel: {required: true, constraint: 'OutsideWorkplaceCode'}">
								#{i18n.getText('CMM011_14', ['Com_Workplace'])}</div></td>
							<td><div><input tabindex="19" data-bind="ntsTextEditor: {
											value: externalCode,
											name: '#[CMM011_14]',
											constraint: 'OutsideWorkplaceCode',
											option: {
												width: '100px',
											},
											required: false,
											enable: isValidWorplaceHistory}" /></div></td>
						</tr><!-- END A6_1 ~ A7_2 -->
						
						<!-- BEGIN A81_1 ~ A8_2 -->
						<tr>
							<td class="td-detail"><div data-bind="ntsFormLabel: {required: true, constraint: 'WorkplaceName'}">
								#{i18n.getText('CMM011_15', ['Com_Workplace'])}</div></td>
							<td><div><input id="wkpName" tabindex="20" data-bind="ntsTextEditor: {
											value: workplaceName,
											name: '#[CMM011_15]',
											constraint: 'WorkplaceName',
											option: {
												width: '150px',
											},
											required: true,
											enable: isValidWorplaceHistory}" /></div></td>
							<td></td>
							<td></td>
						</tr><!-- END A81_1 ~ A8_2 -->
						
						<!-- BEGIN A9_1 ~ A9_2 -->
						<tr>
							<td class="td-detail"><div data-bind="ntsFormLabel: {}">
								#{i18n.getText('CMM011_16', ['Com_Workplace'])}</div></td>
							<td colspan="2"><div><input id="wkpDisplayName" tabindex="21" data-bind="ntsTextEditor: {
											value: wkpDisplayName,
											name: '#[CMM011_16]',
											constraint: 'WorkplaceDisplayName',
											option: {
												width: '320px',
											},
											required: true,
											enable: isValidWorplaceHistory}" /></div></td>
							<td></td>
						</tr><!-- END A9_1 ~ A9_2 -->
						
						<!-- BEGIN A10_1 ~ A10_2 -->
						<tr>
							<td class="td-detail"><div data-bind="ntsFormLabel: {constraint: 'WorkplaceGenericName'}">
								#{i18n.getText('CMM011_17', ['Com_Workplace'])}</div></td>
							<td colspan="4"><div><input id="wkpFullName" tabindex="22" data-bind="ntsTextEditor: {
											value: wkpFullName,
											name: '#[CMM011_17]',
											constraint: 'WorkplaceGenericName',
											option: {
												width: '500px',
											},
											required: true,
											enable: isValidWorplaceHistory}" /></div></td>
							<td></td>
						</tr><!-- END A10_1 ~ A10_2 -->
					</table>
				</div><!-- END A5_1 ~ A_10_2 -->
			</div>
		</ui:define>
	</ui:composition>
</body>
</html>