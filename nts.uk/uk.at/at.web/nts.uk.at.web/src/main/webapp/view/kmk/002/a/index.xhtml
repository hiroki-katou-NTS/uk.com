<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:com="http://xmlns.jcp.org/jsf/component" xmlns:h="http://xmlns.jcp.org/jsf/html">

<body>
   <ui:composition template="../../../../master/base.xhtml">
      <ui:define name="htmlHead">
         <com:ValidatorScript>
            nts.uk.ctx.at.shared.dom.scherec.optitem.OptionalItemName
            nts.uk.ctx.at.shared.dom.scherec.optitem.NumberRangeValue
            nts.uk.ctx.at.shared.dom.scherec.optitem.TimeRangeValue
            nts.uk.ctx.at.shared.dom.scherec.optitem.AmountRangeValue
            nts.uk.ctx.at.shared.dom.scherec.optitem.calculation.FormulaName
            nts.uk.ctx.at.shared.dom.scherec.optitem.UnitOfOptionalItem
            nts.uk.ctx.at.shared.dom.scherec.optitem.DescritionOptionalItem
            nts.uk.ctx.at.shared.dom.scherec.optitem.NoteOptionalItem

            nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.optionalitemvalue.AnyItemTime
            nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.optionalitemvalue.AnyItemTimes
            nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.optionalitemvalue.AnyItemAmount
            nts.uk.ctx.at.shared.dom.common.anyitem.AnyTimesMonth
            nts.uk.ctx.at.shared.dom.common.anyitem.AnyTimeMonth
            nts.uk.ctx.at.shared.dom.common.anyitem.AnyAmountMonth
         </com:ValidatorScript>
         <com:scriptfile path="/view/language/select/languagemasterselect-jquery-ext.js" of="nts.uk.com.web" />
         <com:stylefile path="/view/language/select/languagemasterselect.css" of="nts.uk.com.web" />
         <com:scriptfile set="IGNITE" />
         <com:stylefile path="kmk002.a.style.css" />
         <com:scriptfile path="kmk002.a.start.js" />
         <com:scriptfile path="kmk002.a.service.js" />
         <com:scriptfile path="kmk002.a.vm.js" />
      </ui:define>
      <ui:define name="content">
         <com:ko tag="with" bind="optionalItemHeader">
            <div id="functions-area">
               <div class="container">
                  <button tabindex="1" class="proceed" data-bind="click: saveOptionalItemDetail, enable: hasSelected &amp;&amp; $root.errors.isEmpty">
                     #{i18n.getText('KMK002_1')}</button>
                  <!-- Print Excel -->
                  <button tabindex="1" id="print-button"
                     data-bind="click: function(){ $vm.exportExcel()}">#{i18n.getText('KMK002_99')}</button>
                  <div tabindex="1" id="switch-language" data-bind="visible: false"></div>
               </div>
            </div>
            <div id="contents-area" style="display: none" data-bind="visible: true" class="fixed-flex-layout">
               <!-- Optional item grid list. -->
               <div class="opt-item-grid-list pull-left caret-right caret-background bg-green fixed-flex-layout-left">
                  <i class="icon icon-searchbox"></i>
                  <div tabindex="1" data-bind="ntsSearchBox: {
                        targetKey: 'itemNo',
                        mode:'igGrid',
                        comId:'tbl-master-list',
                        items: optionalItemHeaders,
                        selected: selectedCode,
                        selectedKey: 'itemNo',
                        fields: ['itemNo', 'itemName']}"></div>
                  <table tabindex="1" id="tbl-master-list" data-bind="ntsGridList: {
                        name: '#[KMK002_6]',
                        width: 380,
                        dataSource: optionalItemHeaders,
                        optionsValue: 'itemNo',
                        columns: columns,
                        multiple: false,
                        value: selectedCode,
                        rows: 15}">
                  </table>
               </div>
               <!-- Optional Item view model -->
               <div class="pull-left opt-item-detail fixed-flex-layout-right">
                  <com:ko tag="with" bind="optionalItem">
                     <div class="table">
                        <div class="cell">
                           <table class="control-group">
                              <tr>
                                 <td>
                                    <div data-bind="ntsFormLabel: {required: true, constraint: 'OptionalItemName'}">
                                       #{i18n.getText('KMK002_11')}</div>
                                 </td>
                                 <td><input tabindex="1" id="inpName" data-bind="ntsTextEditor: {
                                             name: '#[KMK002_12]',
                                             value: optionalItemName,
                                             constraint: 'OptionalItemName', 
                                             enable: $parent.hasSelected, 
                                             required: true}" /></td>
                              </tr>

                              <tr>
                                 <td>
                                    <div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_101')}</div>
                                 </td>
                                 <td>
                                    <div data-bind="ntsSwitchButton: {
                                                name: '#[KMK002_102]',
                                                options: usageClsDatasource,
                                                optionsValue: 'code',
                                                optionsText: 'name',
                                                value: usageAtr,
                                                required: true,
                                                enable: $parent.hasSelected &amp;&amp; $parents[1].langJP()
                                             }"></div>
                                 </td>
                              </tr>
                              <tr>
                                 <!-- Usage Atr -->
                                 <td>
                                    <div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_13')}</div>
                                 </td>
                                 <td>
                                    <div tabindex="1" data-bind="ntsSwitchButton: {
                                                name: '#[KMK002_13]',
                                                options: calculationAtr,
                                                optionsValue: 'code',
                                                optionsText: 'name',
                                                value: selectedClac,
                                                enable: usageAtr() === 1 &amp;&amp; $parent.hasSelected &amp;&amp; $parents[1].langJP() }"></div>
                                 </td>
                              </tr>
                              <tr>
                                 <!-- Performance Atr -->
                                 <td>
                                    <div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_20')}</div>
                                 </td>
                                 <td>
                                    <div tabindex="1" data-bind="ntsSwitchButton: {
                                                name: '#[KMK002_21]',
                                                options: perfClsDatasource,
                                                optionsValue: 'code',
                                                optionsText: 'name',
                                                value: performanceAtr,
                                                enable: usageAtr() === 1 &amp;&amp; $parents[1].langJP()}"></div>
                                 </td>
                              </tr>
                              <tr>
                                 <!-- optionalItemAtr -->
                                 <td>
                                    <div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_24')}</div>
                                 </td>
                                 <td>
                                    <div tabindex="1" style="width: 80px" data-bind="ntsComboBox: {
                                                name: '#[KMK002_24]',
                                                options: atrDataSource,
                                                optionsValue: 'value',
                                                value: optionalItemAtr,
                                                optionsText: 'localizedName',
                                                editable: false,
                                                enable: usageAtr() === 1 &amp;&amp; $parents[1].langJP(),
                                                columns: [
                                                { prop: 'localizedName', length: 2 },
                                                ]}">
                                    </div>
                                    <div style="display: inline; vertical-align: super;">
                                       <span class="label" style="margin-left: 50px;">#{i18n.getText('KMK002_109')}</span>
                                       <span class="label" style="margin-left: 20px;" data-bind="text: dailyUnit, visible: performanceAtr() === 1"></span> <!-- daily -->
                                       <span class="label" style="margin-left: 20px;" data-bind="text: monthlyUnit, visible: performanceAtr() === 0"></span> <!-- monthly -->
                                       <span class="label" data-bind="text: unit"></span>
                                    </div>
                                 </td>
                              </tr>
                              <tr>
                                 <td>
                                    <div data-bind="ntsFormLabel: {required: false, constraint: 'UnitOfOptionalItem'}">#{i18n.getText('KMK002_75')}</div>
                                 </td>
                                 <td>
                                    <input tabindex="1" id="inp-unit" data-bind="ntsTextEditor: {
                                                name: '#[KMK002_75]',
                                                value: unit,
                                                enable: optionalItemAtr() !== 0 &amp;&amp; usageAtr() === 1 &amp;&amp; enableUnit &amp;&amp; $parents[1].langJP(),
                                                constraint: 'UnitOfOptionalItem',
                                                required: false}" />
                                 </td>
                              </tr>
                           </table>
                           <table class="control-group">
                              <tr>
                                 <td></td>
                                 <td></td>
                                 <td class="text-center">日別範</td>
                                 <td class="text-center">月別範</td>
                              </tr>
                              <tr>
                                 <!-- Calculation ResultRange -->
                                 <td>
                                    <div data-bind="ntsFormLabel: {required: false}">#{i18n.getText('KMK002_25')}</div>
                                 </td>
                                 <td>
                                    <div tabindex="1" id="cb-upper" data-bind="ntsCheckBox: {
                                       name: '#[KMK002_26]',
                                       checked: calcResultRange.upperCheck,
                                       enable: usageAtr() === 1 &amp;&amp; $parents[1].langJP(),
                                       text: nts.uk.resource.getText('KMK002_26') }"></div>
                                 </td>
                                 <td>
                                    <div>
                                       <!-- A3_21 -->
                                       <com:ko tag="if" bind="isNumberSelected()">
                                          <input tabindex="1" id="inp-upper-number-day"
                                             data-bind="ntsNumberEditor: {
                                                      name: '#[KMK002_26]',
                                                      value: calcResultRange.numberUpperDay,
                                                      constraint: 'AnyItemTimes',
                                                      required: usageAtr() === 1 &amp;&amp; calcResultRange.upperCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; performanceAtr() === 1 &amp;&amp; calcResultRange.upperRequired(),
                                                      option: {
                                                      grouplength: 3,
                                                      decimallength: 2
                                                      },
                                                      enable: usageAtr() === 1 &amp;&amp; calcResultRange.upperCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; performanceAtr() === 1}" />
                                       </com:ko>
                                       <!-- A3_26 -->
                                       <com:ko tag="if" bind="isAmountSelected()">
                                          <input tabindex="1" id="inp-upper-amount-day"
                                             data-bind="ntsNumberEditor: {
                                                      name: '#[KMK002_26]',
                                                      value: calcResultRange.amountUpperDay,
                                                      constraint: 'AnyItemAmount',
                                                      required: usageAtr() === 1 &amp;&amp; calcResultRange.upperCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; performanceAtr() === 1 &amp;&amp; calcResultRange.upperRequired(),
                                                      option: {
                                                      grouplength: 3
                                                      },
                                                      enable: usageAtr() === 1 &amp;&amp; calcResultRange.upperCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; performanceAtr() === 1}" />
                                       </com:ko>
                                       <!-- A3_28 -->
                                       <com:ko tag="if" bind="isTimeSelected()">
                                          <input tabindex="1" id="inp-upper-time-day"
                                             data-bind="ntsTimeEditor: {
                                                      name: '#[KMK002_26]',
                                                      value: calcResultRange.timeUpperDay,
                                                      constraint: 'AnyItemTime',
                                                      required: usageAtr() === 1 &amp;&amp; calcResultRange.upperCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; performanceAtr() === 1 &amp;&amp; calcResultRange.upperRequired(),
                                                      inputFormat: 'time',
                                                      mode: 'time',
                                                      enable: usageAtr() === 1 &amp;&amp; calcResultRange.upperCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; performanceAtr() === 1}" />
                                       </com:ko>
                                    </div>
                                 </td>
                                 <td>
                                    <div>
                                       <!-- A3_30 -->
                                       <com:ko tag="if" bind="isNumberSelected()">
                                          <input tabindex="1" id="inp-upper-number-month"
                                             data-bind="ntsNumberEditor: {
                                                      name: '#[KMK002_26]',
                                                      value: calcResultRange.numberUpperMonth,
                                                      constraint: 'AnyTimesMonth',
                                                      required: usageAtr() === 1 &amp;&amp; calcResultRange.upperCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; calcResultRange.upperRequired(),
                                                      option: {
                                                      grouplength: 3,
                                                      decimallength: 2
                                                      },
                                                      enable: usageAtr() === 1 &amp;&amp; calcResultRange.upperCheck() &amp;&amp; $parents[1].langJP()}" />
                                       </com:ko>
                                       <!-- A3_32 -->
                                       <com:ko tag="if" bind="isAmountSelected()">
                                          <input tabindex="1" id="inp-upper-amount-month"
                                             data-bind="ntsNumberEditor: {
                                                      name: '#[KMK002_26]',
                                                      value: calcResultRange.amountUpperMonth,
                                                      constraint: 'AnyAmountMonth',
                                                      required: usageAtr() === 1 &amp;&amp; calcResultRange.upperCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; calcResultRange.upperRequired(),
                                                      option: {
                                                      grouplength: 3
                                                      },
                                                      enable: usageAtr() === 1 &amp;&amp; calcResultRange.upperCheck() &amp;&amp; $parents[1].langJP()}" />
                                       </com:ko>
                                       <!-- A3_34 -->
                                       <com:ko tag="if" bind="isTimeSelected()">
                                          <input tabindex="1" id="inp-upper-time-month"
                                             data-bind="ntsTimeEditor: {
                                                      name: '#[KMK002_26]',
                                                      value: calcResultRange.timeUpperMonth,
                                                      constraint: 'AnyTimeMonth',
                                                      required: usageAtr() === 1 &amp;&amp; calcResultRange.upperCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; calcResultRange.upperRequired(),
                                                      inputFormat: 'time',
                                                      mode: 'time',
                                                      enable: usageAtr() === 1 &amp;&amp; calcResultRange.upperCheck() &amp;&amp; $parents[1].langJP()}" />
                                       </com:ko>
                                    </div>
                                 </td>
                              </tr>
                              <tr>
                                 <td></td>
                                 <td>
                                    <div tabindex="1" id="cb-lower" data-bind="ntsCheckBox: {
                                       name: '#[KMK002_27]',
                                       checked: calcResultRange.lowerCheck,
                                       enable: usageAtr() === 1 &amp;&amp; $parents[1].langJP(),
                                       text: nts.uk.resource.getText('KMK002_27') }"></div>
                                 </td>
                                 <!-- Calculation ResultRange -->
                                 <td>
                                    <div>
                                       <!-- A3_23 -->
                                       <com:ko tag="if" bind="isNumberSelected()">
                                          <input tabindex="1" id="inp-lower-number-day"
                                             data-bind="ntsNumberEditor: {
                                                         name: '#[KMK002_27]',
                                                         value: calcResultRange.numberLowerDay,
                                                         constraint: 'AnyItemTimes',
                                                         required: usageAtr() === 1 &amp;&amp; calcResultRange.lowerCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; performanceAtr() === 1 &amp;&amp; calcResultRange.lowerRequired(),
                                                         option: {
                                                         grouplength: 3,
                                                         decimallength: 2
                                                         },
                                                         enable: usageAtr() === 1 &amp;&amp; calcResultRange.lowerCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; performanceAtr() === 1}" />
                                       </com:ko>
                                       <!-- A3_27 -->
                                       <com:ko tag="if" bind="isTimeSelected()">
                                          <input tabindex="1" id="inp-lower-time-day"
                                             data-bind="ntsTimeEditor: {
                                                         name: '#[KMK002_27]',
                                                         value: calcResultRange.timeLowerDay,
                                                         constraint: 'AnyItemTime',
                                                         required: usageAtr() === 1 &amp;&amp; calcResultRange.lowerCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; performanceAtr() === 1 &amp;&amp; calcResultRange.lowerRequired(),
                                                         inputFormat: 'time',
                                                         mode: 'time',
                                                         enable: usageAtr() === 1 &amp;&amp; calcResultRange.lowerCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; performanceAtr() === 1}" />
                                       </com:ko>
                                       <!-- A3_29 -->
                                       <com:ko tag="if" bind="isAmountSelected()">
                                          <input tabindex="1" id="inp-lower-amount-day"
                                             data-bind="ntsNumberEditor: {
                                                         name: '#[KMK002_27]',
                                                         value: calcResultRange.amountLowerDay,
                                                         constraint: 'AnyItemAmount',
                                                         required: usageAtr() === 1 &amp;&amp; calcResultRange.lowerCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; performanceAtr() === 1 &amp;&amp; calcResultRange.lowerRequired(),
                                                         option: {
                                                         grouplength: 3
                                                         },
                                                         enable: usageAtr() === 1 &amp;&amp; calcResultRange.lowerCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; performanceAtr() === 1}" />
                                       </com:ko>
                                    </div>
                                 </td>
                                 <td>
                                    <div>
                                       <!-- A3_31 -->
                                       <com:ko tag="if" bind="isNumberSelected()">
                                          <input tabindex="1" id="inp-lower-number-month"
                                             data-bind="ntsNumberEditor: {
                                                         name: '#[KMK002_27]',
                                                         value: calcResultRange.numberLowerMonth,
                                                         constraint: 'AnyTimesMonth',
                                                         required: usageAtr() === 1 &amp;&amp; calcResultRange.lowerCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; calcResultRange.lowerRequired(),
                                                         option: {
                                                         grouplength: 3,
                                                         decimallength: 2
                                                         },
                                                         enable: usageAtr() === 1 &amp;&amp; calcResultRange.lowerCheck() &amp;&amp; $parents[1].langJP()}" />
                                       </com:ko>
                                       <!-- A3_33 -->
                                       <com:ko tag="if" bind="isTimeSelected()">
                                          <input tabindex="1" id="inp-lower-time-month"
                                             data-bind="ntsTimeEditor: {
                                                         name: '#[KMK002_27]',
                                                         value: calcResultRange.timeLowerMonth,
                                                         constraint: 'AnyTimeMonth',
                                                         required: usageAtr() === 1 &amp;&amp; calcResultRange.lowerCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; calcResultRange.lowerRequired(),
                                                         inputFormat: 'time',
                                                         mode: 'time',
                                                         enable: usageAtr() === 1 &amp;&amp; calcResultRange.lowerCheck() &amp;&amp; $parents[1].langJP()}" />
                                       </com:ko>
                                       <!-- A3_35 -->
                                       <com:ko tag="if" bind="isAmountSelected()">
                                          <input tabindex="1" id="inp-lower-amount-month"
                                             data-bind="ntsNumberEditor: {
                                                         name: '#[KMK002_27]',
                                                         value: calcResultRange.amountLowerMonth,
                                                         constraint: 'AnyAmountMonth',
                                                         required: usageAtr() === 1 &amp;&amp; calcResultRange.lowerCheck() &amp;&amp; $parents[1].langJP() &amp;&amp; calcResultRange.lowerRequired(),
                                                         option: {
                                                         grouplength: 3
                                                         },
                                                         enable: usageAtr() === 1 &amp;&amp; calcResultRange.lowerCheck() &amp;&amp; $parents[1].langJP()}" />
                                       </com:ko>
                                    </div>
                                 </td>
                              </tr>
                           </table>
                        </div>
                        <div class="cell" style="padding-left: 10px;">
                           <div>
                              <div class="cell col-1">
                                 <div data-bind="ntsFormLabel: {required: true, constraint: 'DescritionOptionalItem'}">
                                    #{i18n.getText('KMK002_105')}</div>
                              </div>
                              <div class="cell" style="vertical-align: bottom;">
                                 <textarea id="description" style="height: 50px;" data-bind="ntsMultilineEditor: {
                                                   value: description,
                                                   constraint: 'DescritionOptionalItem',
                                                   name: '#[KMK002_106]',
                                                   required: true,
                                                   enable: usageAtr() === 1 &amp;&amp; $parents[1].langJP(),
                                                   option: {
                                                      width: '300'
                                                   }
                                                }"></textarea>
                              </div>
                           </div>
                           <div style="margin-top: 5px;">
                              <div class="cell col-1">
                                 <div data-bind="ntsFormLabel: {required: false, constraint: 'NoteOptionalItem'}">
                                    #{i18n.getText('KMK002_107')}</div>
                              </div>
                              <div class="cell" style="vertical-align: bottom;">
                                 <textarea style="height: 150px;" data-bind="ntsMultilineEditor: {
                                                   value: note,
                                                   constraint: 'NoteOptionalItem',
                                                   name: '#[KMK002_108]',
                                                   enable: usageAtr() === 1 &amp;&amp; $parents[1].langJP(),
                                                   option: {
                                                      width: '300'
                                                   }
                                                }"></textarea>
                              </div>
                           </div>
                        </div>
                     </div>
                     <hr style="width: 1200px; margin-left: 10px;" />
                     <table class="control-group">
                        <!-- <tr>
                           <td colspan="4">
                              <hr />
                           </td>
                        </tr> -->
                        <tr>
                           <!-- EmpCondition Atr -->
                           <td style="width: 140px;">
                              <div data-bind="ntsFormLabel: {required: true}">#{i18n.getText('KMK002_16')}</div>
                           </td>
                           <td style="width: 140px;">
                              <div tabindex="2" data-bind="ntsSwitchButton: {
                                    name: '#[KMK002_16]',
                                    options: empConClsDatasource,
                                    optionsValue: 'code',
                                    optionsText: 'name',
                                    value: empConditionAtr,
                                    enable: usageAtr() === 1 &amp;&amp; selectedClac() === 1 &amp;&amp; isUsed &amp;&amp; $parents[1].langJP()}"></div>
                              <button tabindex="2"
                                 data-bind="click: openDialogB, enable: usageAtr() === 1 &amp;&amp; selectedClac() === 1 &amp;&amp; empConditionAtr() == 1 &amp;&amp; isUsed &amp;&amp; $parents[1].langJP()">#{i18n.getText('KMK002_19')}</button>
                           </td>
                           <td></td>
                        </tr>
                        <!-- Optional Item view model -->
                        <tr>
                           <td><button tabindex="2"
                                 data-bind="click: addFormulaAbove, enable: usageAtr() === 1 &amp;&amp; selectedClac() === 1 &amp;&amp; isUsed &amp;&amp; $parents[1].langJP()">#{i18n.getText('KMK002_28')}</button>
                           </td>
                           <td>
                              <button tabindex="2"
                                 data-bind="click: addFormulaBelow, enable: usageAtr() === 1 &amp;&amp; selectedClac() === 1 &amp;&amp; isUsed &amp;&amp; $parents[1].langJP()">#{i18n.getText('KMK002_29')}</button>
                              <button tabindex="2" style="margin-left: 12px"
                                 data-bind="click: removeFormula, enable: usageAtr() === 1 &amp;&amp; selectedClac() === 1 &amp;&amp; isUsed() &amp;&amp; hasSelectedFormula() &amp;&amp; $parents[1].langJP()"
                                 class="danger">#{i18n.getText('KMK002_30')}</button>
                           </td>
                        </tr>
                        <tr>
                           <td colspan="5"><span>#{i18n.getText('KMK002_31')}</span>
                              <input style="width: 700px; margin-left: 18px;" id="inp-apply-formula" data-bind="ntsTextEditor: {
                                    value: applyFormula,
                                    enable: isUsed &amp;&amp; $parents[1].langJP(),
                                    readonly: true,
                                    required: false}" />
                           </td>
                        </tr>
                     </table>
                     <!-- Optional Item formula view model -->
                     <table id="tbl-calc-formula" data-bind="name: '#[KMK002_32]'">
                        <colgroup>
                           <col width="35px" />
                           <col width="38px" />
                           <col width="145px" />
                           <col width="157px" />
                           <col width="207px" />
                           <col width="35px" />
                           <col width="157px" />
                           <col width="105px" />
                           <col width="145px" />
                           <col width="105px" />
                           <col width="145px" />
                        </colgroup>
                        <thead>
                           <tr>
                              <th class="ui-widget-header">
                                 <div tabindex="-1" data-bind="ntsCheckBox: {
                                       checked: checkedAllFormula,
                                       enable: isUsed &amp;&amp; usageAtr() === 1 &amp;&amp; selectedClac() === 1 &amp;&amp; calcFormulas().length > 0,
                                       text: '' }"></div>
                              </th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_33')}</th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_24')}</th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_34')}</th>
                              <th colspan="3" class="ui-widget-header">#{i18n.getText('KMK002_35')}</th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_36')}</th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_37')}</th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_38')}</th>
                              <th class="ui-widget-header">#{i18n.getText('KMK002_39')}</th>
                           </tr>
                        </thead>
                        <tbody>
                           <com:ko tag="foreach" bind="calcFormulas">
                              <tr>
                                 <td>
                                    <div tabindex="-1" data-bind="ntsCheckBox: {
                                          checked: selected,
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isUsed,
                                          text: '' }"></div>
                                 </td>
                                 <td style="text-align: right" data-bind="text: symbolValue"></td>
                                 <td>
                                    <div tabindex="2" style="width: 80px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_24]',
                                          options: formulaAtrDs,
                                          optionsValue: 'value',
                                          value: formulaAtr,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isUsed,
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                    </div>
                                 </td>
                                 <td><input tabindex="2" class="inp-formula-required" data-bind="attr: {'id': 'formulaName' + ($index() + 1)},
                                    ntsTextEditor: {
                                       name: '#[KMK002_40]',
                                       value: formulaName,
                                       enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isUsed, 
                                       constraint: 'FormulaName',
                                       option: {width: '130'},
                                       required: true}" />
                                 </td>
                                 <td>
                                    <div tabindex="2" data-bind="ntsSwitchButton: {
                                          name: '#[KMK002_41]',
                                          options: calcAtrDs,
                                          optionsValue: 'value',
                                          optionsText: 'localizedName',
                                          value: calcAtr,
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1
                                       }">
                                    </div>
                                 </td>
                                 <td>
                                    <com:ko tag="if" bind="!isFormulaSettingSelected()">
                                       <button tabindex="2" class="btn-calc-set"
                                          data-bind="click: openDialogC, enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isUsed"></button>
                                    </com:ko>
                                    <com:ko tag="if" bind="isFormulaSettingSelected()">
                                       <button tabindex="2" class="btn-calc-set"
                                          data-bind="click: openDialogD, enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isUsed"></button>
                                    </com:ko>
                                 </td>
                                 <td>
                                    <input class="inp-formula-required" data-bind="attr: {'id': 'settingResult' + ($index() + 1)},
                                       ntsTextEditor: {
                                          name: '#[KMK002_35]',
                                          value: settingResult,
                                          readonly: true,
                                          enable: $parent.isUsed, 
                                          required: true}" />
                                 </td>
                                 <td>
                                    <com:ko tag="if" bind="isTimeSelected()">
                                       <div tabindex="2" style="width: 100px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_36]',
                                          options: timeUnitDs,
                                          optionsValue: 'value',
                                          value: timeDailyUnit,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isDailyRoundingEnabled(),
                                          columns: [
                                          { prop: 'localizedName', length: 5 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isAmountSelected()">
                                       <div tabindex="2" style="width: 100px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_36]',
                                          options: amountUnitDs,
                                          optionsValue: 'value',
                                          value: amountDailyUnit,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isDailyRoundingEnabled(),
                                          columns: [
                                          { prop: 'localizedName', length: 5 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isNumberSelected()">
                                       <div tabindex="2" style="width: 100px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_36]',
                                          options: numberUnitDs,
                                          optionsValue: 'value',
                                          value: numberDailyUnit,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isDailyRoundingEnabled(),
                                          columns: [
                                          { prop: 'localizedName', length: 5 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                 </td>
                                 <td>
                                    <com:ko tag="if" bind="isTimeSelected()">
                                       <div tabindex="2" style="width: 140px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_37]',
                                          options: timeRoundingDailyDs,
                                          optionsValue: 'value',
                                          value: timeDailyRounding,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isDailyRoundingEnabled(),
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isNumberSelected()">
                                       <div tabindex="2" style="width: 140px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_37]',
                                          options: numberRoundingDs,
                                          optionsValue: 'value',
                                          value: numberDailyRounding,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isDailyRoundingEnabled(),
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isAmountSelected()">
                                       <div tabindex="2" style="width: 140px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_37]',
                                          options: amountRoundingDs,
                                          optionsValue: 'value',
                                          value: amountDailyRounding,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isDailyRoundingEnabled(),
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                 </td>
                                 <td>
                                    <com:ko tag="if" bind="isTimeSelected()">
                                       <div tabindex="2" style="width: 100px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_38]',
                                          options: timeUnitDs,
                                          optionsValue: 'value',
                                          value: timeMonthlyUnit,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isUsed,
                                          columns: [
                                          { prop: 'localizedName', length: 5 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isNumberSelected()">
                                       <div tabindex="2" style="width: 100px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_38]',
                                          options: numberUnitDs,
                                          optionsValue: 'value',
                                          value: numberMonthlyUnit,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isUsed,
                                          columns: [
                                          { prop: 'localizedName', length: 5 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isAmountSelected()">
                                       <div tabindex="2" style="width: 100px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_38]',
                                          options: amountUnitDs,
                                          optionsValue: 'value',
                                          value: amountMonthlyUnit,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isUsed,
                                          columns: [
                                          { prop: 'localizedName', length: 5 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                 </td>
                                 <td>
                                    <com:ko tag="if" bind="isTimeSelected()">
                                       <div tabindex="2" style="width: 140px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_39]',
                                          options: timeRoundingMonthlyDs,
                                          optionsValue: 'value',
                                          value: timeMonthlyRounding,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isUsed,
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isNumberSelected()">
                                       <div tabindex="2" style="width: 140px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_39]',
                                          options: numberRoundingDs,
                                          optionsValue: 'value',
                                          value: numberMonthlyRounding,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isUsed,
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                    <com:ko tag="if" bind="isAmountSelected()">
                                       <div tabindex="2" style="width: 140px" class="combo-table" data-bind="ntsComboBox: {
                                          name: '#[KMK002_39]',
                                          options: amountRoundingDs,
                                          optionsValue: 'value',
                                          value: amountMonthlyRounding,
                                          optionsText: 'localizedName',
                                          enable: $parent.usageAtr() === 1 &amp;&amp; $parent.selectedClac() === 1 &amp;&amp; $parent.isUsed,
                                          columns: [
                                          { prop: 'localizedName', length: 8 },
                                          ]}">
                                       </div>
                                    </com:ko>
                                 </td>
                              </tr>
                           </com:ko>
                        </tbody>
                     </table>
                  </com:ko>
               </div>
            </div>
         </com:ko>
      </ui:define>
   </ui:composition>
</body>

</html>