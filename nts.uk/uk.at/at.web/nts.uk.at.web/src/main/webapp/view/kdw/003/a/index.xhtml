<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:com="http://xmlns.jcp.org/jsf/component"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
    <body>
        <ui:composition template="../../../../master/base.xhtml">
            <ui:define name="htmlHead">
                <com:scriptfile set="IGNITE" />
                <com:scriptfile
                    path="/lib/generic/igniteui/js/extensions/infragistics.datasource.knockoutjs.js"
                    of="/nts.uk.com.js.web" />
                <com:scriptfile
                    path="/lib/generic/igniteui/js/extensions/infragistics.ui.grid.knockout-extensions.js"
                    of="/nts.uk.com.js.web" />
                <com:scriptfile path="/view/kcp/share/list.js" of="/nts.uk.com.web" />
                <com:scriptfile path="/view/kcp/share/tree.js" of="/nts.uk.com.web" />
                <com:scriptfile path="/view/ccg/share/ccg.service.js"
                                of="/nts.uk.com.web" />
                <com:scriptfile path="/view/ccg/share/ccg.vm.js" of="/nts.uk.com.web" />
                <com:scriptfile path="kdw003.a.start.js" />
                <com:scriptfile path="kdw003.a.vm.js" />
                <com:scriptfile path="kdw003.a.service.js" />
                <com:scriptfile path="/view/kcp/009/kcp009.js" of="/nts.uk.com.web" />
                <com:stylefile path="kdw003.a.style.css" />
                <com:stylefile path="/view/ccg/share/style.css" of="/nts.uk.com.web" />
                <com:stylefile path="/view/kcp/009/style.css" of="/nts.uk.com.web" />
                <com:scriptfile path="/view/kcp/share/list.js" of="/nts.uk.com.web" />
				<com:EnumScript>
					nts.uk.ctx.at.function.dom.dailyfix.ApplicationType
				</com:EnumScript>
                <com:ValidatorScript>
                    nts.uk.shr.com.primitive.sample.SampleTimeDuration
                    nts.uk.ctx.at.shared.dom.vacation.setting.annualpaidleave.AnnualLeaveGrantDay					
                    nts.uk.ctx.at.shared.dom.common.time.AttendanceTime
                    nts.uk.ctx.at.shared.dom.common.time.AttendanceTimeOfExistMinus
                    nts.uk.ctx.at.record.dom.daily.WorkTimes
                    nts.uk.ctx.at.shared.dom.worktype.WorkTypeCode
                    nts.uk.ctx.at.shared.dom.worktime.common.WorkTimeCode
                    nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.common.timestamp.WorkLocationCD
                    nts.uk.ctx.at.shared.dom.vacation.setting.compensatoryleave.EmploymentCode
                    nts.uk.ctx.bs.employee.dom.classification.ClassificationCode
                    nts.uk.ctx.bs.employee.dom.jobtitle.info.JobTitleCode
                    nts.uk.shr.com.primitive.WorkplaceCode
                    nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.deviationtime.DivergenceReasonContent
                    nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.breakgoout.BreakTimeGoOutTimes
                    nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.remarks.RecordRemarks
                    nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.deviationtime.DiverdenceReasonCode
                    nts.uk.shr.com.time.TimeWithDayAttr
                    nts.uk.ctx.at.shared.dom.common.time.AttendanceTimeMonth
                    nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.optionalitemvalue.AnyItemAmount
                    nts.uk.ctx.at.shared.dom.common.anyitem.AnyAmountMonth
                    nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.optionalitemvalue.AnyItemTime
                    nts.uk.ctx.at.shared.dom.common.anyitem.AnyTimeMonth
                    nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.optionalitemvalue.AnyItemTimes
                    nts.uk.ctx.at.shared.dom.common.anyitem.AnyTimesMonth
                    nts.uk.ctx.at.shared.dom.workrule.businesstype.BusinessTypeCode
                    nts.uk.ctx.at.shared.dom.scherec.dailyattdcal.dailyattendance.timesheet.ouen.SuppNumValue
                </com:ValidatorScript>
            </ui:define>

            <ui:define name="content">
                <div id="functions-area">
                    <div id="function-content">
                        <button style="margin-left: 15px" class="proceed"
                                data-bind="enable: $root.errors.isEmpty &amp;&amp; !changeConditionExtract(), visible:showButton().available1, click: proceed ">#{i18n.getText('KDW003_4')}</button>
                        <button
                            data-bind="enable: !changeConditionExtract(), visible: showButton().available2, click: btnCalculation_Click">#{i18n.getText('KDW003_6')}</button>
                        <button
                            data-bind="enable: !changeConditionExtract(), visible: showButton().available3, click: btnReCalculation_Click">#{i18n.getText('KDW003_12')}</button>
                        <button data-bind="enable: !changeConditionExtract(), click: employmentOk, visible: showButton().available26Confirm">#{i18n.getText('KDW003_65')}</button>
                        <button
                            data-bind="click: tighProcessShow, enable:indentityMonth().enableButton &amp;&amp; !changeConditionExtract(), visible: showButton().available9() &amp;&amp; indentityMonth().show26 &amp;&amp; !indentityMonth().hideAll">#{i18n.getText('KDW003_88')}</button>
                        <button
                            data-bind="click: tighProcessRelease, enable:indentityMonth().enableButton &amp;&amp; !changeConditionExtract(), visible: showButton().available9() &amp;&amp; !indentityMonth().show26 &amp;&amp; !indentityMonth().hideAll" >#{i18n.getText('KDW003_124')}</button>
                        <button 
                        	data-bind="click: showSupportWorkDialog, visible: showWorkLoad">#{i18n.getText('KDW003_133')}</button>
                        <!-- 本人締め処理 -->
                        <button
                            data-bind="enable: !changeConditionExtract(), click : changeExtractionCondition, visible: showButton().available5">#{i18n.getText('KDW003_13')}</button>
                        <button
                            data-bind="enable: !changeConditionExtract(), click : selectDisplayItem, visible: showButton().available8Authority">#{i18n.getText('KDW003_14')}</button>
                        <button data-bind="enable: !changeConditionExtract(),click : historyModification ,visible: showButton().available22 ">#{i18n.getText('KDW003_15')}</button>
                        <!--click : historyModification , showButton().available22 -->
                        <button data-bind="enable: !changeConditionExtract(), click: showErrorDialog , visible: showButton().available24">#{i18n.getText('KDW003_16')}</button>
                        <button data-bind="visible: false">#{i18n.getText('KDW003_17')}</button>
                        <!-- visible: showButton().available7 -->
                        <button data-bind="enable: !changeConditionExtract(), click : proceedUnLock, visible: showLock() &amp;&amp; hideLock()">#{i18n.getText('KDW003_84')}</button>
                        <button data-bind="enable: !changeConditionExtract(), click : proceedLock, visible: unLock() &amp;&amp; hideLock()">#{i18n.getText('KDW003_85')}</button>
                    </div>
                </div>
                <div id="contents-area">
                    <div id="left-content">
                        <div>
                            <a id="back-navigate" class="goback" style="float: left;"
                               data-bind="ntsLinkButton: {}, click: navigateView, visible: transitionDesScreen">#{i18n.getText('KDW003_87')}</a>
                        </div>
                        <div id="ccg001"></div>
                    </div>
                    <div id="right-content">
                        <div class="control-group">
                            <div id="extraction-controls">
								<div id = "date-extract" style="width: 480px;">
									<div>
										<div>
											<div id="daterangepickererror"
												data-bind="ntsDateRangePicker: { 
												required: true, 
												enable: showDateRange, 
												showNextPrevious: true, 
												value: dateRanger, 
												startName: nts.uk.resource.getText('KDW003_25'),
												endName: nts.uk.resource.getText('KDW003_26'),
												maxRange: 'oneMonth'}" />
												
											<div id="daterangepicker">
													<div id="yearMonthPicker" data-bind="ntsDatePicker: { 
																value: yearMonth,
																name: '#[KDW003_40]',
																required: true, 
																dateFormat: 'yearmonth',
																showJumpButtons: true,
																enable: showDateRange,
																valueFormat: 'YYYYMM'}" />
													<span class="label-span">#{i18n.getText('KDW003_128')}</span>
													<div id="dislayFormatLbl" style="vertical-align: middle;" data-bind="ntsComboBox: {
															options: actualTimeOptionDisp,
															optionsValue: 'code',
															value: actualTimeSelectedCode,
															optionsText: 'name',
															enable: showDateRange() &amp;&amp; ko.computed(function() {
																					        return actualTimeOptionDisp().length  > 1;
																					    }, this),
															name:'#[KDW003_128]',
															columns: [
																{ prop: 'name', length: 6 },
															]}">
													</div>
											 </div>
											<div id="cbListDate">
												<div id="choosenDate"
													data-bind="ntsDatePicker: {value: selectedDate, 
													dateFormat: 'YYYY/MM/DD', 
													showJumpButtons: true,
													name: nts.uk.resource.getText('KDW003_27'),
													enable: showDateRange}" />
											</div>
										</div>
									</div>
								</div>
								
								<div>
									<div>
                                		<button id="btnExtraction" class="proceed large"  data-bind="click: btnExtraction_Click">#{i18n.getText('KDW003_20')}</button>
                                	</div>
                                </div>
                                
								<div data-bind="stopBinding: true">
									<div>
                                    	<div id="emp-component"></div>
                                    </div>
                                </div>
			                    
                            </div>
                            <div id="vacationRemaining-content">
	                           	<table>
	                           		<tr>
	                           			<td>
	                           				<button data-bind="visible: referenceVacation().compensLeave(), click: openKDL005Dialog">#{i18n.getText('Com_CompensationHoliday')}</button>
	                           			</td>
	                           			<td>
	                           				<button data-bind="visible: referenceVacation().yearHoliday20(), click: openKDL020Dialog">#{i18n.getText('Com_PaidHoliday')}</button>
	                           			</td>
	                           			<td>
	                           				<button data-bind="visible: referenceVacation().com60HVacation()">#{i18n.getText('Com_ExsessHoliday')}</button>
	                           			</td>
	                           		</tr>
	                           		<tr>
	                           			<td>
	                           				<button data-bind="visible: referenceVacation().substVacation(), click: openKDL009Dialog">#{i18n.getText('Com_SubstituteHoliday')}</button>
	                           			</td>
	                           			<td>
	                           				<button data-bind="visible: referenceVacation().yearHoliday19(), click: openkdl029Dialog">#{i18n.getText('Com_FundedPaidHoliday')}</button>
	                           			</td>
	                           			<td></td>
	                           		</tr>
	                           	</table>
		                    </div>
                            <div id="holiday-agree" class="agree-row font-smaller" >
	                            <div id="numberHoliday" style="float: left; margin-right: 5px ; max-width: 460px">
		                            <table id="fixed-table">
		                                <thead>
		                                    <tr>
		                                        <th class="ui-widget-header"><span>#{i18n.getText('KDW003_7',["#Com_CompensationHoliday"])}</span></th>
		                                        <th class="ui-widget-header"><span>#{i18n.getText('KDW003_7',["#Com_SubstituteHoliday"])}</span></th>
		                                        <th class="ui-widget-header"><span>#{i18n.getText('KDW003_7',["#Com_PaidHoliday"])}</span></th>
		                                        <th class="ui-widget-header"><span>#{i18n.getText('KDW003_7',["#Com_FundedPaidHoliday"])}</span></th>
		                                        <th class="ui-widget-header"><span>#{i18n.getText('KDW003_7',["#Com_ChildNurseHoliday"])}</span></th>
		                                        <th class="ui-widget-header"><span>#{i18n.getText('KDW003_7',["#Com_CareHoliday"])}</span></th>
		                                    </tr>
		                                </thead>
		                                <tbody>
		                                    <tr>
		                                        <td class="ui-widget-body remain-compen-day">
		                                        	<a class="text-holiday hyperlink" style="color: inherit;" data-bind="text: dataHoliday().compensationDay, click: openKDL005Dialog"></a>
		                                       	</td>
		                                        <td class="ui-widget-body remain-subst-day">
		                                        	<a class="text-holiday hyperlink" style="color: inherit;" data-bind="text: dataHoliday().substitute, click: openKDL009Dialog"></a>
		                                        </td>
		                                        <td class="ui-widget-body remain-annual-day">
		                                        	<a class="text-holiday hyperlink" style="color: inherit;" data-bind="text: dataHoliday().annualDay, click: openKDL020Dialog"></a>
		                                        </td>
		                                        <td class="ui-widget-body remain-reserve-day">
		                                        	<a class="text-holiday hyperlink" style="color: inherit;" data-bind="text: dataHoliday().reserve, click: openkdl029Dialog"></a>
		                                        </td>
		                                        <td class="ui-widget-body remain-childCare-day">
                                                    <!-- <span class="text-holiday" data-bind="text: dataHoliday().childCareValue"></span> -->
                                                    <a class="hyperlink" href="" data-bind="text: dataHoliday().childCareValue, click: openKDL051Dialog"></a>
		                                        </td>
		                                        <td class="ui-widget-body remain-longTermCare-day">
                                                    <!-- <span class="text-holiday" data-bind="text: dataHoliday().longTermCareValue"></span> -->
                                                    <a class="hyperlink" href="" data-bind="text: dataHoliday().longTermCareValue, click: openKDL052Dialog"></a>
		                                        </td>
		                                    </tr>
		                                    <!-- <tr>
		                                        <td class="ui-widget-body remain-compen-time">
		                                        	<span class="text-holiday" data-bind="text: dataHoliday().compensationTime"></span>
		                                        </td>
		                                        <td class="ui-widget-body"></td>
		                                        <td class="ui-widget-body remain-annual-time">
		                                        	<span class="text-holiday" data-bind="text: dataHoliday().annualTime"></span>
		                                        </td>
		                                        <td class="ui-widget-body"></td>
		                                    </tr> -->
		                                </tbody>
		                            </table>
		                            <div style="width: 350px">
		                            <label data-bind="text: dataHoliday().dispSysDate, visible: dataHoliday().displayAllUI" style="max-width: 100px"></label>
		                            <label style="max-width: 125px" data-bind="text: dataHoliday().dispNextGrantDate, visible: dataHoliday().dispAnnualDayUI"></label>
		                            </div>
		                        </div>
		                        <div class="agree-column font-smaller" data-bind="let: { fst: agreementInfomation() }">
                                    <table id="agree-table"
                                           data-bind="visible : fst.showAgreement()">
                                        <thead>
                                            <tr>
                                                <th class="ui-widget-header"><span>#{i18n.getText('KDW003_73')}</span></th>
                                                <th class="ui-widget-header"><span>#{i18n.getText('KDW003_75')}</span></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td class="ui-widget-body" id="agree-time"><span
                                                        class="text-holiday" data-bind="text: fst.agreementTime()"></span>
                                                </td>
                                                <td class="ui-widget-body" id="agree-excess"><span
                                                        data-bind="text: fst.agreementExcess()"></span></td>
                                            </tr>
                                        </tbody>
                                    </table>
                              </div>
                            </div>
                        </div>
                        <div id="content-all-grid" style="clear: both">
                            <div id="content-grid-not">
                                
                         		<div class="label warning" style="width: 127px; margin-left: 6px; "
                                     data-bind="visible: unLock">#{i18n.getText('KDW003_86')}</div>
                                
                            </div>
                            
                            <!-- 月次データ -->
                            <div id="monthly-data-view" class="font-smaller" style="margin-top: 10px" data-bind="visible: isVisibleMIGrid">
                                <table id="miGrid"></table>
                            </div>
                            
                            <div id="grid-controls">
                               	<button id="btn-signAll" class="small" data-bind="css: {'btn-signAll2' : unLock() == true, 'btn-signAll': unLock() == false} , click: signAll">#{i18n.getText('KDW003_23')}</button>
                               	<button id="btn-releaseAll" class="small" data-bind="click: releaseAll">#{i18n.getText('KDW003_71')}</button>
	                        	<button id="btnComfirmAttendance" class="small" data-bind="click : referencesActualResult, visible: showButton().available23">#{i18n.getText('KDW003_22')}</button>
	                          	<div id="cbDisplayFormat"
	                                     data-bind="ntsComboBox: {
									options: displayFormatOptions,
									optionsValue: 'code',
									value: displayFormat,
									optionsText: 'name',
									enable: true,
									columns: [
										{ prop: 'name', length: 10 },
									]}"></div>
                               	<button id="btn-legend" class="small" data-bind="ntsLegendButton: legendOptions">凡例</button>
                               	<button id="btn-saveColumnWidth" class="small" data-bind="enable: !changeConditionExtract(), click: btnSaveColumnWidth_Click, visible : showButton().available11">#{i18n.getText('KDW003_24')}</button>
                                <div class="setting-container">
                                    <button id="btn-setting" class="small"
                                            data-bind="click: btnSetting_Click , visible:true"><i data-bind="ntsIcon: { no: 5 }"></i></button>
                                    <div id="setting-content">
                                        <div data-bind="ntsFormLabel: {}">#{i18n.getText('KDW003_28')}</div>
                                        <div id="cbCursorMoveDirection"
                                             data-bind="ntsComboBox: {
																options: cursorMoveDirections,
																optionsValue: 'code',
																value: selectedDirection,
																optionsText: 'name',
																enable: true,
																columns: [
																	{ prop: 'name', length: 3 },
																]}"></div>
                                        <br />
                                        <div data-bind="ntsCheckBox: { checked: displayWhenZero }">#{i18n.getText('KDW003_29')}</div>
                                        <br />
                                        <div data-bind="ntsCheckBox: { checked: showHeaderNumber }">#{i18n.getText('KDW003_30')}</div>
										<br />
                                        <div data-bind="if: false">
	                                        <div data-bind="ntsCheckBox: { checked: showProfileIcon }">#{i18n.getText('KDW003_31')}</div>
	                                        <br />
										</div>
                                    </div>
                               	</div>
                           	</div>
                                
                            <!--  実績グリッド本体 -->
                            <div class="compact-grid grid-container font-smaller" id="gid">
                                <div id="dpGrid"></div>
                                <div id="sample-component"></div>
                            </div>
                            
                            <div class="Row">
                                <div class="Column" data-bind="visible : showFlex">
                                    <div id="flex" data-bind="visible : showFlex">
                                        <div>
                                            <table id="flex-table">
                                                <thead>
                                                    <tr>
                                                        <th class="ui-widget-header"
                                                            style="width: 165px; height: 22px">#{i18n.getText('KDW003_77')}</th>
                                                        <th class="ui-widget-header" style="width: 75px">#{i18n.getText('KDW003_78')}</th>
                                                        <th class="ui-widget-header" style="width: 55px">#{i18n.getText('Com_PaidHoliday')}</th>
                                                        <th class="ui-widget-header" style="width: 55px">#{i18n.getText('KDW003_79')}</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr data-bind="let: { fst: flexShortage() }">
                                                        <td class="ui-widget-body" id="short-time"><span
                                                                class="text-holiday" data-bind="text: fst.shortageTime()"></span></td>
                                                        <td class="text-holiday ui-widget-body" id="next-month"><span
                                                                data-bind="text: ko.computed(function() { return fst.nextMonthTransferredMoneyTime() })"></span>
                                                        </td>
                                                        <td class="ui-widget-body"><span class="text-holiday">
                                                                <input style="width: 55px"
                                                                       data-bind="ntsNumberEditor: { 
																							name: fst.nameNoOfHolidays, 
																							value: fst.noOfHolidays, 
																							constraint: 'AnnualLeaveGrantDay', 
																							option:  optionNoOfHolidays, 
																							required: true, 
																							enable: canFlex() &amp;&amp; !lockDisableFlex() &amp;&amp; indentityMonth().show26, 
																							readonly: false 
																						} ">
                                                                </input>
                                                            </span></td>
                                                        <td class="ui-widget-body"><span class="text-holiday">
                                                                <input style="width: 55px"
                                                                       data-bind="ntsTimeEditor: {
																						name: fst.nameAbsentDeductionTime, 
																						constraint: 'AttendanceTimeMonth', 
																						value: fst.absentDeductionTime, 
																						inputFormat: 'time', 
																						mode: 'time', 
																						enable: canFlex() &amp;&amp; !lockDisableFlex() &amp;&amp; indentityMonth().show26, 
																						readonly: false, 
																						required: true
																					}"></input>
                                                            </span></td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
									<div>
										<span>#{i18n.getText('KDW003_120')}</span>
									</div>
									<!-- fix bug 102423 -->
									<!-- 	<div style="margin-top: 20px">
										<span data-bind="text: comment"></span>
									</div> -->
								</div>
									<!-- fix bug 102423 : style="margin-top: 37px;" -->
                                    <div id="text-flex" style="top: -67px;">
                                        <div>
                                            <span style="color: red"
                                                  data-bind="text: flexShortage().messageRed"></span>
                                        </div>
                                        <div>
                                            <span data-bind="text: flexShortage().messageNoForward"></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
					</div>
					<!-- fix bug 102423 -->
					<div style="margin-top: 16px">
						<span data-bind="text: comment"></span>
					</div>
				</div>
                    <div id="tooltip">
                        <span id="textLock"></span>
                    </div>
                </div>
                <!-- </div> -->
            </ui:define>
        </ui:composition>
    </body>
</html>