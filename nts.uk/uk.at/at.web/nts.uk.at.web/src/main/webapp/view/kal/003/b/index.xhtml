<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:com="http://xmlns.jcp.org/jsf/component"
    xmlns:h="http://xmlns.jcp.org/jsf/html">
<body>
    <ui:composition template="../../../../master/dialog.xhtml">
        <ui:define name="htmlHead">
            <script>
                var dialogSize = {
                    width : 1020,
                    height : 315
                };
            </script>
            <com:ValidatorScript>
                nts.uk.shr.com.time.TimeWithDayAttr
                nts.uk.ctx.at.record.dom.workrecord.erroralarm.primitivevalue.CheckedTimeDuration
                nts.uk.ctx.at.record.dom.workrecord.erroralarm.primitivevalue.CheckedTimesValue
                nts.uk.ctx.at.record.dom.workrecord.erroralarm.primitivevalue.CheckedAmountValue
            </com:ValidatorScript>
            <com:scriptfile set="IGNITE" />
            <com:scriptfile path="../share/model.js" />
            <com:scriptfile path="../share/kal003utils.js" />
            <com:stylefile path="kal003.b.style.css" />
            <com:scriptfile path="kal003.b.service.js" />
            <com:scriptfile path="kal003.b.vm.js" />
            <com:scriptfile path="kal003.b.start.js" />
            
        </ui:define>

        <ui:define name="content">
            <div id="contents-area">
                <div class="form-group" style="text-align: center;"
                    data-bind="with: currentErrAlaCheckCondition">
                    <!--  B1 -->
                    <div id="div_common_header">
                        <table >
                        <colgroup>
                            <col width="150px" />
                            <col width="*" />
                        </colgroup>
                        <tr class="row">
                            <!-- B1-1: チェック項目 - Item check-->
                            <td class = "pad_left_10px">
                                <div>#{i18n.getText('KAL003_26')}</div>
                            </td>
                            <td class = "pad_left_5px">
                                <!-- B1-2, B1-3-->
                                <div id="cbxTypeCheckWorkRecord" class="combo-box"
                                            data-bind="ntsComboBox: {
                                                name:'#[KAL003_27]',
                                                options: $parent.listTypeCheckWorkRecords,
                                                optionsValue: 'value',
                                                visibleItemsCount: 5,
                                                value: checkItem,
                                                optionsText: 'localizedName',
                                                enable: true,
                                                columns: [{ prop: 'localizedName', length: 5 }]}">
                                </div>
                            </td>
                        </tr>
                     </table>
                    </div>
                    <!-- 対象とする勤務種類 - Target service type - BA1 -->
                    <com:ko-if bind="checkItem() == 0
                         || checkItem() == 1
                         || checkItem() == 2
                         || checkItem() == 3
                         || checkItem() == 4
                         || checkItem() == 5
                         || checkItem() == 6">
                     <div id='div_target_service_type_ba1'>
                        <table >
                            <colgroup>
                                <col width="150px" />
                                <col width="250px" />
                                <col width="218px" />
                                <col width="*" />
                            </colgroup>
                            <tr class="row">
                                <td class = "pad_left_10px">
                                    <!-- BA1-1 -->
                                    <div>#{i18n.getText('KAL003_56')}</div>
                                </td>
                                <td>
                                </td>
                                <td class = "pad_left_5px alnright">
                                    <!-- BA1-2 -->
                                    <com:ko-if bind="checkItem() == 0
                                        || checkItem() == 1
                                        || checkItem() == 2
                                        || checkItem() == 3
                                        || checkItem() == 4
                                        || checkItem() == 6">

	                                    <div id="ba1_2" data-bind="ntsRadioBoxGroup: {
	                                        options: $parent.itemListTargetServiceType_BA1_2,
	                                        optionsValue: 'value',
	                                        optionsText: 'localizedName',
	                                        value: $parent.targetServiceTypeSelected_BA1_2,
	                                        enable: true}">
	                                     </div>
                                     </com:ko-if>
                                     <com:ko-if bind="checkItem() == 5">
	                                     <div id="ba1_5" data-bind="ntsRadioBoxGroup: {
	                                        options: $parent.itemListTargetSelectionRange_BA1_5,
	                                        optionsValue: 'value',
	                                        optionsText: 'localizedName',
	                                        value: $parent.targetSelectionRangeSelected_BA1_5,
	                                        enable: true}">
	                                     </div>
	                                 </com:ko-if>
	                            </td>
	                            <td class = "pad_left_5px">
	                               <div>
		                                <!-- BA1-3 -->
		                                <com:ko-if bind="checkItem() == 0
                                        || checkItem() == 1
                                        || checkItem() == 2
                                        || checkItem() == 3
                                        || checkItem() == 4
                                        || checkItem() == 6">
                                            <button id="btnSettingBA1_3"  data-bind="click : function() {$parent.btnSettingBA1_3_click()}, enable: $parent.targetServiceTypeSelected_BA1_2() > 0">#{i18n.getText('KAL003_57')}</button>
                                            <!-- BA1-4 -->
                                            <input data-bind="ntsTextEditor: {
                                              value: $parent.displayWorkTypeSelections_BA1_4,
                                              readonly: true}"/>
                                        </com:ko-if>
		                                <com:ko-if bind="checkItem() == 5">
			                                <button id="btnSettingBA1_3"  data-bind="click : function() {$parent.btnSettingBA1_3_click()}, enable: true">#{i18n.getText('KAL003_57')}</button>
			                                                              
			                                <!-- BA1-4 -->
			                                <input data-bind="ntsTextEditor: {
			                                  value: $parent.displayWorkTypeSelections_BA1_4,
			                                  readonly: true}"/>
			                            </com:ko-if>
	                                </div>
	                            </td>
	                        </tr>
	                     </table>
                    </div>
                   </com:ko-if>
                    <!-- チェック条件 - check conditions : BA2 -->
                    <com:ko-if bind="checkItem() == 0
                        || checkItem() == 1
                        || checkItem() == 2
                        || checkItem() == 3
                        || checkItem() == 4">
	                    <div id="div_check_conditions_ba2">
		                    <table >
		                        <colgroup>
		                            <col width="150px" />
		                            <col width="250px" />
		                            <col width="200px" />
		                            <col width="50px" />
		                            <col width="50px" />
		                        </colgroup>
		                        <tr class="row">
		                            <td class = "pad_left_10px">
		                                <!-- BA2-1 -->
		                                <div>#{i18n.getText('KAL003_58')}</div>
		                            </td>
		                            <td class = "pad_left_5px">
		                                
		                                <div id="ba2_2_3">
	                                        <!-- BA2-2 -->
	                                        <button id="btnSettingBA2_2" data-bind="click : function() {$parent.btnSettingBA2_2_click()}, enable: true">#{i18n.getText('KAL003_57')}</button>
	                                        <!-- BA2-3 -->
	                                        <input data-bind="ntsTextEditor: {
		                                           value: $parent.displayWorkTimeItemSelections_BA2_3,
		                                           readonly: true}" />
	                                    </div>
		                            </td>
		                            <td class = "pad_left_5px">
		                                <!-- BA2-4, BA2-5 -->
		                                <div id="comBoxOperator" class="combo-box"
	                                            data-bind="ntsComboBox: {
	                                                name:'#[KAL003_60]',
	                                                options: $parent.listCompareTypes,
	                                                optionsValue: 'value',
	                                                visibleItemsCount: 5,
	                                                value: comparisonOperator,
	                                                optionsText: 'localizedName',
	                                                editable: false,
	                                                enable: true,
	                                                columns: [
	                                                    { prop: 'localizedName', length: 16 }
	                                                ]}">
	                                    </div>
		                            </td>
		                            <td class = "pad_left_5px">
		                               <!-- BA2-6 -->
		                               <com:ko-if bind="checkItem() == 0 || checkItem() == 4"> <!-- 時間, 連続時間の場合 -->
		                                   <input class="value-input needcheck" data-bind="ntsTimeEditor: {
		                                           name: '#[KAL003_64]',
		                                           value: minimumValue,
	                                                required: true,
	                                                constraint: 'CheckedTimeDuration'}" />
	                                    </com:ko-if>
	                                    <com:ko-if bind="checkItem() == 1"> <!-- 回数 -->
	                                        <input class="value-input needcheck" data-bind="ntsNumberEditor: {
			                                        name: '#[KAL003_64]',
			                                        value: minimumValue, 
			                                        required: true,
			                                        constraint: 'CheckedTimesValue'}" />
	                                    </com:ko-if>
	                                    <com:ko-if bind="checkItem() == 2"> <!-- 金額 -->
                                            <input class="value-input needcheck" data-bind="ntsNumberEditor: {
                                                    name: '#[KAL003_64]',
                                                    value: minimumValue, 
                                                    required: true,
                                                    constraint: 'CheckedAmountValue'}" />
                                        </com:ko-if>
	                                    <com:ko-if bind="checkItem() == 3"> <!-- 時刻 -->
	                                        <input class="value-input needcheck" data-bind="ntsTimeWithDayEditor: { 
			                                        name: '#[KAL003_64]', 
			                                        constraint:'TimeWithDayAttr', 
			                                        value: minimumValue, 
			                                        required: true }" />
	                                    </com:ko-if>
	                                    
		                            </td>
		                            <td class = "pad_left_5px">
	                                   <!-- BA2-7 -->
                                       <com:ko-if bind="checkItem() == 0 || checkItem() == 4"> <!-- 時間, 連続時間の場合 -->
                                           <input class="value-input needcheck" data-bind="ntsTimeEditor: {
                                                   name: '#[KAL003_65]',
                                                   value: maximumValue,
                                                    constraint: 'CheckedTimeDuration',
                                                    required: $parent.enableComparisonMaxValue(),
                                                    enable: $parent.enableComparisonMaxValue()}"/>
                                        </com:ko-if>
                                        <com:ko-if bind="checkItem() == 1"> <!-- 回数 -->
                                            <input class="value-input needcheck" data-bind="ntsNumberEditor: {
                                                    name: '#[KAL003_65]',
                                                    value: maximumValue, 
                                                    constraint: 'CheckedTimesValue',
                                                    required: $parent.enableComparisonMaxValue(),
                                                    enable: $parent.enableComparisonMaxValue()}"/>
                                                    
                                        </com:ko-if>
                                        <com:ko-if bind="checkItem() == 2"> <!-- 金額 -->
                                            <input class="value-input needcheck" data-bind="ntsNumberEditor: {
                                                    name: '#[KAL003_65]',
                                                    value: maximumValue, 
                                                    constraint: 'CheckedAmountValue',
                                                    required: $parent.enableComparisonMaxValue(),
                                                    enable: $parent.enableComparisonMaxValue()}"/>
                                                    
                                        </com:ko-if>
                                        <com:ko-if bind="checkItem() == 3"> <!-- 時刻 -->
                                            <input class="value-input needcheck" data-bind="ntsTimeWithDayEditor: { 
		                                            name: '#[KAL003_65]', 
		                                            constraint:'TimeWithDayAttr', 
		                                            value: maximumValue, 
                                                    required: $parent.enableComparisonMaxValue(),
                                                    enable: $parent.enableComparisonMaxValue() }" />
                                        </com:ko-if>
	                                </td>
		                        </tr>
		                     </table>
	                    </div>
	                </com:ko-if>
                    <!-- 対象就業時間帯 - Target working hours : -->
                    <com:ko-if bind="checkItem() == 6">
	                    <div id="div_target_working_hours_ba5">
	                        <table >
	                        <colgroup>
	                            <col width="150px" />
	                            <col width="250px" />
                                <col width="218px" />
                                <col width="*" />
	                        </colgroup>
	                        <tr class="row">
	                            <!-- BA5-1: チェック項目 - Item check-->
	                            <td class = "pad_left_10px">
	                                <div>#{i18n.getText('KAL003_63')}</div>
	                            </td>
	                            <td></td>
	                            <!-- BA1-5-->
	                            <td class = "pad_left_5px">
	                                <div id="ba1_5_target_working_hours" data-bind="ntsRadioBoxGroup: {
	                                        options: $parent.itemListTargetSelectionRange_BA1_5_target_working_hours,
	                                        optionsValue: 'value',
	                                        optionsText: 'localizedName',
	                                        value: $parent.targetSelectionRangeSelected_BA1_5_target_working_hours,
	                                        enable: true}">
	                                     </div>
	                            </td>
	                            <td class = "pad_left_5px">
	                                <div id="ba5_2_3">
	                                    <!-- BA5-2 -->
	                                    <button id="btnSettingBA5_3" data-bind="click : function() {$parent.btnSettingBA5_2_click()}, enable: true">#{i18n.getText('KAL003_57')}</button>
	                                    <!-- BA1-3 -->
	                                    <input data-bind="ntsTextEditor: {
	                                       value: $parent.displayWorkingTimeZoneSelections_BA5_3,
	                                       readonly: true}" />
	                                </div>
	                            </td>
	                        </tr>
	                     </table>
	                    </div>
	                </com:ko-if>
                    <!-- 連続期間 - Continuous period BA3-->
                    <com:ko-if bind="checkItem() == 4
                        || checkItem() == 5
                        || checkItem() == 6">
	                    <div id="div_continuous_period_ba3">
	                        <table >
	                        <colgroup>
	                            <col width="150px" />
	                            <col width="250px" />
	                            <col width="*" />
	                        </colgroup>
	                        <tr class="row">
	                            <!-- BA3-1: 連続期間 - Continuous period-->
	                            <td class = "pad_left_10px">
	                                <div>#{i18n.getText('KAL003_61')}</div>
	                            </td>
	                            <td></td>
	                            <td class = "pad_left_5px">
	                               <div>
		                                <!-- BA3-2--> <!-- TODO constrain Continuous period chua taoj -> tam thoi dungf CheckedTimesValue -->
		                                <input class="value-input needcheck" data-bind="ntsNumberEditor: {
		                                       name: '#[KAL003_61]',
		                                       value: continuousPeriodInput,
		                                       required: true,
		                                       constraint: 'CheckedTimesValue',
		                                       enable: true}" />
	                                           #{i18n.getText('日')}</div>
	                                            
	                            </td>
	                        </tr>
	                     </table>
	                    </div>
	                </com:ko-if>

                    <!-- Compound Condition -->
                    <com:ko-if bind="checkItem() == 7">
	                    <div id='div_compound_condition' data-bind="with: compoundCondition">
	                        <!--  group 1 -->
	                        <div>
	                            <table >
			                        <colgroup>
			                            <col width="200px" />
			                            <col width="200px" />
			                            <col width="*" />
			                        </colgroup>
			                        <tr class="row">
			                            <!-- B5-1:  -->
			                            <td class = "pad_left_10px">
			                                <div>#{i18n.getText('KAL003_31')}</div>
			                            </td>
			                            <!-- B5-2:  -->
			                            <td class = "pad_left_5px">
	                                        <div>#{i18n.getText('KAL003_32')}</div>
	                                    </td>
	                                    <!-- B5-3:  -->
	                                    <td class = "pad_left_5px">
	                                        <div class="cf" data-bind="ntsSwitchButton: {
	                                            name: '#[KAL003_32]',
											    options: $parents[1].swANDOR_B5_3,
											    optionsValue: 'value',
											    optionsText: 'localizedName',
											    value: group1Condition().groupOperator,
											    enable: true }"></div>
	                                    </td>
			                        </tr>
			                    </table>
	                        </div>
	                        <div class = "pad_left_10px">
	                           <!-- B5_4 -->
	                            <table id="table-groupcondition" class="fixed-table" >
						            <colgroup>
						                <col width="807px"/>
						                <col width="*"/>
						            </colgroup>
						            <thead>
						               <tr> 
						                  <!-- B5_5 -->
						                   <th class="ui-widget-header" colspan="2" style ="text-align: center;">#{i18n.getText('KAL003_33')}</th>
						               </tr>
						            </thead>
						            <tbody data-bind = "foreach: group1Condition().groupListCondition">
						                <tr>
						                  <!-- B5_6 -->
						                    <td class = "pad_left_10px"><div data-bind = "text: itemConditionId + operatorCd + target" class="limited-label description"></div></td>
						                    <!-- B5_7 -->
											<td><button id="btnSettingB5_7"  data-bind="click : function() {$parents[1].btnSettingB5_7_click()}, enable: true">#{i18n.getText('KAL003_14')}</button></td>
						                </tr>
						            </tbody>
						        </table>
	                        </div>
	                        <!--  group 2 -->
	                        <div>
	                            <table >
	                                <colgroup>
	                                    <col width="200px" />
	                                    <col width="200" />
	                                    <col width="*" />
	                                </colgroup>
	                                <tr class="row">
	                                    <!-- B6-1:  -->
	                                    <td>
	                                        <div data-bind="ntsCheckBox: { checked: hasGroup2, enable: true}">#{i18n.getText('KAL003_34')}</div>
	                                    </td>
	                                    <!-- B6-2:  -->
	                                    <com:ko-if bind="hasGroup2()">
		                                    <td class = "pad_left_5px">
		                                       
		                                        <div id ="div_b6_2">#{i18n.getText('KAL003_35')}</div>
		                                    </td>
		                                    <!-- B6-3:  -->
		                                    <td class = "pad_left_5px">
		                                        <div id = "div_b6_3" class="cf" data-bind="ntsSwitchButton: {
		                                            name: '#[KAL003_35]',
		                                            options: $parents[1].swANDOR_B6_3,
		                                            optionsValue: 'value',
		                                            optionsText: 'localizedName',
		                                            value: group2Condition().groupOperator,
		                                            enable: true }"></div>
		                                    </td>
	                                    </com:ko-if>
	                                    </tr>
	                            </table>
	                        </div>
	                        <com:ko-if bind="hasGroup2()">
		                        <div id ="B16" class = "pad_left_10px cf">
		                            <!-- B16_1 -->
	                                <table id="table-groupcondition" class="fixed-table" >
	                                    <colgroup>
	                                        <col width="807px"/>
	                                        <col width="*"/>
	                                    </colgroup>
	                                    <thead>
	                                       <tr> 
	                                          <!-- B16_2 -->
	                                           <th class="ui-widget-header"  colspan="2" style ="text-align: center;">#{i18n.getText('KAL003_33')}</th>
	                                       </tr>
	                                    </thead>
	                                    <tbody data-bind = "foreach: group2Condition().groupListCondition">
	                                        <tr>
	                                          <!-- B16_3 -->
	                                            <td class = "pad_left_10px"><div data-bind = "text: itemConditionId + operatorCd + target" class="limited-label description"></div></td>
	                                            <!-- B16_4 -->
	                                            <td><button id="btnSettingB16_5"  data-bind="click : function() {$parents[1].btnSettingB16_5_click()}, enable: true">#{i18n.getText('KAL003_14')}</button></td>
	                                        </tr>
	                                    </tbody>
	                                </table>
		                        </div>
		                        <div id = "div_b7">
		                            <table >
		                                <colgroup>
		                                    <col width="300px" />
		                                    <col width="*" />
		                                </colgroup>
		                                <tr class="row">
		                                    <!-- B7-1:  -->
		                                    <td class = "pad_left_10px">
		                                    
		                                        <div>#{i18n.getText('KAL003_36')}</div>
		                                    </td>
		                                    <!-- B7-2:  -->
		                                    <td class = "pad_left_5px">
		                                        <div class="cf" data-bind="ntsSwitchButton: {
		                                            name: '#[KAL003_36]',
		                                            options: $parents[1].swANDOR_B7_2,
		                                            optionsValue: 'value',
		                                            optionsText: 'localizedName',
		                                            value: operatorBetweenG1AndG2,
		                                            enable: true }"></div>
		                                    </td>
		                                    
		                                </tr>
		                            </table>
		                        </div>
		                    </com:ko-if>
	                    </div>
                    </com:ko-if>
                    <div id="div_common_footer">
                        <table >
                        <colgroup>
                            <col width="400px" />
                            <col width="*" />
                        </colgroup>
                        <tr class="row">
                            <!-- B2-1: メッセージ色 - Message color -->
                            <td class = "pad_left_10px">
                            
                                <div>#{i18n.getText('KAL003_28')}</div>
                            </td>
                            <td class = "pad_left_5px">
                                <!-- B2-2-->
                                <div id="colorpicker" data-bind="ntsColorPicker: {value: color, enable: true, width: 60}"/>
                            </td>
                        </tr>
                        <tr class="row">
                            <!-- B3-1: 表示するメッセージ - Message content -->
                            <td class = "pad_left_10px">
                                <div>#{i18n.getText('KAL003_25')}</div>
                            </td>
                            <td class = "pad_left_5px">
                                <!-- B3-2-->
                                <div id="inpMessage">
                                    <textarea style="width: 432px; height: 90px;" data-name="message" data-bind="ntsMultilineEditor: {name: '#[KAL003_25]',
                                        value: message, constraint: true, enable: true, readonly: false}" />
                                </div>

                            </td>
                        </tr>
                        <tr class="row">
                            
                            <td class = "pad_left_10px">
                            </td>
                            <td>
                                <!-- B3-3: ■メッセージを太字にする - Make the message bold-->
                                <div data-bind="ntsCheckBox: { checked: isBold, enable: true}">#{i18n.getText('KAL003_29')}</div>
                            </td>
                        </tr>
                     </table>
                </div>
                </div>
            </div>
            <div id="functions-area-bottom" style="height: 70px; padding-top: 18px; text-align: center;">
                    <!-- B4-2 : Decision-->
                    <button id="btnDecision" class="proceed large" tabindex = "2" style="padding-left: 10px; width:90px"
                        data-bind="click : btnDecision, enable: true">#{i18n.getText('KAL003_14')}</button>
                    <!-- B4-3 : Cancel-->
                    <button id="btnCancel" class="large" tabindex = "3" style="padding-left: 10px; margin-left: 239px;; width:90px"
                        data-bind="click: closeDialog">#{i18n.getText('KAL003_30')}</button>
                </div>
        </ui:define>
    </ui:composition>
</body>
</html>